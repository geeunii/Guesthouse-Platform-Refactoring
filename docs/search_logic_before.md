# ðŸ” ê²€ìƒ‰ ë¡œì§ ë¬¸ì„œ (Search Logic Documentation)

ì´ ë¬¸ì„œëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜(`List.vue`)ì˜ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„ ë°©ì‹ê³¼ ë¡œì§ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ðŸ— ì•„í‚¤í…ì²˜ ê°œìš” (Architecture Overview)

í˜„ìž¬ ê²€ìƒ‰ ë¡œì§ì€ **í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹(Hybrid Approach)**ì„ ì±„íƒí•˜ê³  ìžˆìŠµë‹ˆë‹¤:
1.  **ì„œë²„ ì‚¬ì´ë“œ ê²€ìƒ‰ (Server-Side Search)**: í•µì‹¬ ì¡°ê±´(ê²€ìƒ‰ì–´, ë‚ ì§œ, í…Œë§ˆ)ì„ ê¸°ë°˜ìœ¼ë¡œ 1ì°¨ ë°ì´í„°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
2.  **í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„°ë§ (Client-Side Filtering)**: ì‚¬ìš©ìžì˜ ì¦‰ê°ì ì¸ ìƒí˜¸ìž‘ìš©(ê°€ê²© ë²”ìœ„, ì¸ì› ìˆ˜)ì— ë”°ë¼ ë¡œë“œëœ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì •ì œí•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

## ðŸ”„ ë°ì´í„° íë¦„ (Data Flow)

### 1. ìƒíƒœ ê´€ë¦¬ (Search Store)
Piniaì˜ `useSearchStore`ê°€ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ì˜ ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(Single Source of Truth) ì—­í• ì„ í•©ë‹ˆë‹¤.
-   **State**: `keyword`, `startDate`, `endDate`, `themeIds`, `minPrice`, `maxPrice`, `guestCount`
-   **Actions**: `setKeyword()`, `setPriceRange()` ë“±ì„ í†µí•´ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.

### 2. URL ë™ê¸°í™” (Router)
ê²€ìƒ‰ ì¡°ê±´ì€ URL ì¿¼ë¦¬ ìŠ¤íŠ¸ë§(`route.query`)ê³¼ ë™ê¸°í™”ë˜ì–´, ì¦ê²¨ì°¾ê¸°ë‚˜ ê³µìœ ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
-   **Watcher**: `List.vue`ëŠ” URL ë³€ê²½ì„ ê°ì§€í•˜ì—¬ ìžë™ìœ¼ë¡œ `loadList()`ë¥¼ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
-   **Navigation**: í•„í„° ë³€ê²½ ì‹œ URLì„ ì—…ë°ì´íŠ¸(`router.push`)í•˜ê³ , ì´ëŠ” ë‹¤ì‹œ ë°ì´í„° ì¡°íšŒë¥¼ ìœ ë°œí•©ë‹ˆë‹¤.

### 3. ë°ì´í„° ì¡°íšŒ (`loadList`)
-   **Trigger**: íŽ˜ì´ì§€ ë¡œë“œ, URL íŒŒë¼ë¯¸í„° ë³€ê²½, "ë” ë³´ê¸°" (ë¬´í•œ ìŠ¤í¬ë¡¤) ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.
-   **API í˜¸ì¶œ**: `searchList({ themeIds, keyword, checkin, checkout, guestCount, page, size })`
-   **Server Response**: í•µì‹¬ ì¡°ê±´ì— ë§¤ì¹­ë˜ëŠ” ìˆ™ì†Œ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

### 4. í´ë¼ì´ì–¸íŠ¸ í•„í„°ë§ (`filteredItems`)
ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ì›ë³¸ ë°ì´í„°(`items`)ëŠ” `computed` ì†ì„±ì¸ `filteredItems`ë¥¼ ê±°ì³ ìµœì¢…ì ìœ¼ë¡œ ë Œë”ë§ë©ë‹ˆë‹¤.

```javascript
const filteredItems = computed(() => {
  return items.value.filter(item => {
    // 1. ê°€ê²© í•„í„° (Price Filter)
    if (minPrice && item.price < minPrice) return false;
    if (maxPrice && item.price > maxPrice) return false;
    
    // 2. ì¸ì› ìˆ˜ í•„í„° (Guest Count Filter - Client check)
    if (guestCount > 0 && item.maxGuests < guestCount) return false;
    
    return true;
  });
});
```

---

## ðŸ§© ì£¼ìš” ì»´í¬ë„ŒíŠ¸ (Key Components)

### `List.vue`
-   **ì—­í• **: ê²€ìƒ‰ íë¦„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì´ìž ë©”ì¸ ë·°.
-   **í‘œì‹œ**: `filteredItems`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `GuesthouseCard` ëª©ë¡ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
-   **ë¹ˆ í™”ë©´ (Empty State)**: `filteredItems`ê°€ ì—†ì„ ë•Œ "ì¡°ê±´ì— ë§žëŠ” ìˆ™ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”" ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
-   **í—¤ë”**: ê²€ìƒ‰ ê²°ê³¼ê°€ ìžˆì„ ë•ŒëŠ” ê°œìˆ˜("ê²€ìƒ‰ê²°ê³¼ Nê±´")ë¥¼, ì—†ì„ ë•ŒëŠ” "ìˆ™ì†Œ ëª©ë¡"ì„ í‘œì‹œí•˜ëŠ” ì¡°ê±´ë¶€ ë Œë”ë§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### `FilterModal.vue`
-   **ì—­í• **: ê°€ê²© ë²”ìœ„, í…Œë§ˆ, ì¸ì› ìˆ˜ ì„ íƒì„ ìœ„í•œ UI ì œê³µ.
-   **ë™ìž‘**: "ì ìš©í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ì„ íƒëœ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ URL ì¿¼ë¦¬ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

---

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° í•œê³„ (Notes & Limitations)

-   **íŽ˜ì´ì§€ë„¤ì´ì…˜ê³¼ í´ë¼ì´ì–¸íŠ¸ í•„í„°ë§ì˜ ë¶ˆì¼ì¹˜**:
    -   í˜„ìž¬ êµ¬ì¡°ëŠ” ì„œë²„ì—ì„œ íŽ˜ì´ì§€ ë‹¨ìœ„(ì˜ˆ: 16ê°œ)ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ **í›„** í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•„í„°ë§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    -   **í˜„ìƒ**: ë§Œì•½ ì„œë²„ê°€ ë³´ë‚¸ 16ê°œ í•­ëª©ì´ í´ë¼ì´ì–¸íŠ¸ í•„í„°(ê°€ê²© ë“±)ì— ì˜í•´ ëª¨ë‘ ì œì™¸ë˜ë©´, ë‹¤ìŒ íŽ˜ì´ì§€ì— ë°ì´í„°ê°€ ìžˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì‚¬ìš©ìžì—ê²ŒëŠ” ë¹ˆ í™”ë©´ì´ ë³´ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (í˜„ìž¬ ë¬´í•œ ìŠ¤í¬ë¡¤ ë¡œì§ìœ¼ë¡œ ì¼ë¶€ ë³´ì™„ë¨)
-   **ê²°ê³¼ ê°œìˆ˜ í‘œì‹œ**:
    -   í—¤ë”ì˜ `totalCount`ëŠ” **ì„œë²„ ê¸°ì¤€ ì „ì²´ ê²€ìƒ‰ ìˆ˜**ìž…ë‹ˆë‹¤.
    -   ë”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ í•„í„°ë§ìœ¼ë¡œ ì¸í•´ ì‹¤ì œ ë³´ì—¬ì§€ëŠ” ê°œìˆ˜(`filteredItems`)ì™€ ë‹¤ë¥¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìžˆì„ ë•ŒëŠ” í—¤ë”ì˜ ê°œìˆ˜ í‘œì‹œë¥¼ ìˆ¨ê¸°ëŠ” UI ì²˜ë¦¬ê°€ ì ìš©ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.

## ðŸš€ í–¥í›„ ê°œì„  ì‚¬í•­ & ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„

### Q. ì„œë²„ ì‚¬ì´ë“œë¡œ ì´ë™í•˜ë©´ ì†ë„ê°€ ë” ëŠë ¤ì§€ì§€ ì•Šì„ê¹Œìš”?

ì„œë²„ ì‚¬ì´ë“œ í•„í„°ë§ìœ¼ë¡œ ì „í™˜ ì‹œ **ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì‹œê°„**ì´ ì¶”ê°€ë˜ë¯€ë¡œ í•„í„° ì ìš© ì¦‰ì‹œ ë°˜ì‘í•˜ëŠ” ì²´ê° ì†ë„ëŠ” í´ë¼ì´ì–¸íŠ¸ ë°©ì‹ë³´ë‹¤ ëŠë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ **ì„œë²„ ì‚¬ì´ë“œ ì´ë™ì„ ê¶Œìž¥**í•©ë‹ˆë‹¤.

1.  **ë°ì´í„° ì •í™•ì„± (ê°€ìž¥ ì¤‘ìš”)**
    -   í˜„ìž¬ ë°©ì‹: ì„œë²„ì—ì„œ '10ê°œ'ë¥¼ ê°€ì ¸ì˜¨ ë’¤ ê°€ê²© ì¡°ê±´ìœ¼ë¡œ ê±°ë¥´ë©´ 0ê°œê°€ ë  ìˆ˜ ìžˆìŒ â†’ "ë‹¤ìŒ íŽ˜ì´ì§€ì— ë§žëŠ” ë°©ì´ ìžˆì–´ë„ ì‚¬ìš©ìžì—ê²Œ ì•ˆ ë³´ìž„" (ì¹˜ëª…ì  UX)
    -   ì„œë²„ ë°©ì‹: DB ì¿¼ë¦¬ ë‹¨ê³„ì—ì„œ ì¡°ê±´ì„ ê±¸ì–´ ê°€ì ¸ì˜¤ë¯€ë¡œ í•­ìƒ ìœ íš¨í•œ ê²°ê³¼ë§Œ ì •í™•í•˜ê²Œ íŽ˜ì´ì§€ë„¤ì´ì…˜í•˜ì—¬ ë³´ì—¬ì¤Œ.

2.  **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬**
    -   ë°ì´í„°ê°€ ìˆ˜ì²œ ê±´ ì´ìƒìœ¼ë¡œ ëŠ˜ì–´ë‚˜ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ëª¨ë“  ë°ì´í„°ë¥¼ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.
    -   ë°ì´í„°ë² ì´ìŠ¤(DB)ëŠ” ê²€ìƒ‰ê³¼ í•„í„°ë§ì— ìµœì í™”ë˜ì–´ ìžˆì–´, ì¸ë±ì‹±ì„ ìž˜ íƒ€ë©´ ìˆ˜ë§Œ ê±´ì˜ ë°ì´í„°ë„ ë°€ë¦¬ì´ˆ(ms) ë‹¨ìœ„ë¡œ ê±¸ëŸ¬ë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

3.  **ìµœì í™” ë°©ì•ˆ**
    -   í•„í„° ë³€ê²½ ì‹œë§ˆë‹¤ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤ë©´, **Debounce** (ì‚¬ìš©ìž ìž…ë ¥ì´ ë©ˆì¶˜ í›„ ìš”ì²­) ì²˜ë¦¬ë¥¼ í†µí•´ ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ ì¤„ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
