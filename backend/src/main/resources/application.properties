spring.application.name=geharbang

# Import secret properties (optional, ignored if not exists)
spring.config.import=optional:classpath:application-secret.properties
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://${DB_HOST:127.0.0.1}:${DB_PORT:13306}/guesthouse?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
spring.datasource.username=thismo
spring.datasource.password=thismo1234


# Logging Setting
logging.level.root=INFO
logging.level.com.ssg9th2team.geharbang=DEBUG

# Log File Save Setting
logging.file.name=app.log
logging.file.path=logs

# SQL Log
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.ddl-auto=validate

spring.flyway.enabled=false
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=false
spring.flyway.clean-disabled=true
# spring.flyway.repair-on-migrate=true (Not standard property, handled differently)

# SQL Parameter Check
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor=TRACE

# File Upload Size
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

#
spring.jackson.time-zone=Asia/Seoul
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# MyBatis
mybatis.mapper-locations=classpath:/mapper/**/*.xml
mybatis.configuration.map-underscore-to-camel-case=true

# AI summary provider: RULE | OPENAI | MOCK
ai.summary.provider=GEMINI

# Host revenue
host.platform.fee-rate=0.04

# Google Cloud Vision OCR
google.cloud.credentials.location=${GOOGLE_CLOUD_CREDENTIALS_LOCATION:classpath:googlevision/ocr-test-480914-b8a930bfbdc0.json}

# ????? API encoding / ?? ? decoding
data.go.kr.service-key.encoding=TJvXTffP6pDXBs9c1GFmhEhKtjlBgAjp6O3rka%2B6Bah2It8%2BrdqN8DEUylB5Hy8BXrAy3NoaljOZtZwgejMMMA%3D%3D
data.go.kr.service-key.decoding=TJvXTffP6pDXBs9c1GFmhEhKtjlBgAjp6O3rka+6Bah2It8+rdqN8DEUylB5Hy8BXrAy3NoaljOZtZwgejMMMA==
holiday.api-base-url=https://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService
holiday.service-key=${HOLIDAY_SERVICE_KEY:${data.go.kr.service-key.decoding:}}

# Kakao Map API
kakao.rest-api-key=d68f5165ab4759f8c1e89f8210178d10

# TossPayments (결제위젯용)
tosspayments.secret-key=test_gsk_docs_OaPz8L5KdmQXkzRz3y47BMw6
tosspayments.client-key=test_gck_docs_Ovk5rk1EwkEbP0W43n07xlzm

# JWT
jwt.secret=+cTSQUBeGrv7lZeDduUU2CYuq9B2cgV72uQx6MoyCOwpdz80ZpQUsGshRfmIeKPNlrGCap35nQUBydvReN5Muw==
jwt.access-token-expiration=3600000
jwt.refresh-token-expiration=5400000

# Mail Server Settings (for Email Verification)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=jaehoon0321@gmail.com
spring.mail.password=anglanfqxmyfiogl
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Naver Cloud Object Storage
ncloud.storage.endpoint=https://kr.object.ncloudstorage.com
ncloud.storage.region=kr-standard
ncloud.storage.bucket=${NCLOUD_BUCKET:guesthouse}
ncloud.storage.access-key=${NCLOUD_ACCESS_KEY}
ncloud.storage.secret-key=${NCLOUD_SECRET_KEY}


# Naver OAuth2 Login (Spring Security OAuth2 Client)
spring.security.oauth2.client.registration.naver.client-id=${NAVER_CLIENT_ID}
spring.security.oauth2.client.registration.naver.client-secret=${NAVER_CLIENT_SECRET}
spring.security.oauth2.client.registration.naver.redirect-uri=${OAUTH2_REDIRECT_BASE_URL:http://localhost:8080}/login/oauth2/code/naver
spring.security.oauth2.client.registration.naver.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.naver.scope=name,email
spring.security.oauth2.client.registration.naver.client-name=Naver
spring.security.oauth2.client.provider.naver.authorization-uri=https://nid.naver.com/oauth2.0/authorize
spring.security.oauth2.client.provider.naver.token-uri=https://nid.naver.com/oauth2.0/token
spring.security.oauth2.client.provider.naver.user-info-uri=https://openapi.naver.com/v1/nid/me
spring.security.oauth2.client.provider.naver.user-name-attribute=response

# NCP CLOVA Chatbot
ncp.chatbot.invoke-url=${NCLOUD_CHATBOT_INVOKE_URL}
ncp.chatbot.signature-secret=${NCLOUD_CHATBOT_SIGNATURE_SECRET}

# OAuth2 Redirect URI (for frontend)
oauth2.redirect-uri=${FRONTEND_BASE_URL:http://localhost:5173}/oauth2/redirect
oauth2.signup-redirect-uri=${FRONTEND_BASE_URL:http://localhost:5173}/social-signup
oauth2.account-link-redirect-uri=${FRONTEND_BASE_URL:http://localhost:5173}/account-link
oauth2.failure-redirect-uri=${FRONTEND_BASE_URL:http://localhost:5173}/login
oauth2.allowed-redirect-hosts=${OAUTH2_ALLOWED_REDIRECT_HOSTS:localhost,127.0.0.1,49.50.138.206}

# Cache
# Redis 캐시 사용 (쿠폰 목록 캐싱)
spring.cache.type=redis
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=10m

# Redis (분산 락 + 캐시)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.cache.redis.time-to-live=600000

# Load test toggle: allow duplicate issues with a single user token
coupon.issue.skip-duplicate-check=false
coupon.issue.skip-db-finalize=false
coupon.issue.async-enabled=true
coupon.issue.async-processor.batch-size=200
coupon.issue.async-processor.delay-ms=200


# Google OAuth2 Login
spring.security.oauth2.client.registration.google.client-name=Google
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.redirect-uri=${OAUTH2_REDIRECT_BASE_URL:http://localhost:8080}/login/oauth2/code/google
spring.security.oauth2.client.registration.google.authorization-grant-type=authorization_code

# Kakao OAuth2 Login (Provider Settings)
# client-id와 client-secret은 application-secret.properties에 정의됨
spring.security.oauth2.client.registration.kakao.client-name=Kakao
spring.security.oauth2.client.registration.kakao.client-id=${KAKAO_CLIENT_ID}
spring.security.oauth2.client.registration.kakao.client-secret=${KAKAO_CLIENT_SECRET}
spring.security.oauth2.client.registration.kakao.redirect-uri=${OAUTH2_REDIRECT_BASE_URL:http://localhost:8080}/login/oauth2/code/kakao
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.kakao.scope=profile_nickname,account_email

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

# [??] ????? ?? ??? (???)
env.oauth2-frontend-base-url=${OAUTH2_FRONTEND_BASE_URL:http://localhost:5173}

# ==========================================
# Gemini Multi-Key Settings (Load Balancing)
# ==========================================
# LKM KEY
gemini.api.key.1=${GEMINI_API_KEY}

# KHG KEY
gemini.api.key.2=${GEMINI_API_KEY_KHG}

# URL MAPPING (SERVER .env of GEMINI_API_URL)
gemini.api.url=${GEMINI_API_URL}

# MODEL (URL? ???? ??? ???? ? ???, ?? ??? ??)
gemini.model=${GEMINI_MODEL:gemini-flash-latest}

